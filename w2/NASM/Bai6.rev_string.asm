%include 'func_x64.asm'
section .data
    msg1 db 'Nhap chuoi: ',0x0
    lenMsg1 equ $-msg1
    msg2 db 'Chuoi sau khi dao nguoc: ',0x0
    lenMsg2 equ $-msg2
section .bss
    string  resb  256
section .text
    global _start
_start:
    mov rbp, rsp
    sub rsp, 8

    ;get input string
    mov rdi, 1
    mov rsi, msg1 
    mov rdx, lenMsg1
    mov rax, 1
    syscall
    mov rdi, 0
    mov rsi, string
    mov rdx, 256
    mov rax, 0
    syscall

    ;revese string
    mov rdi, 1
    mov rsi, msg2
    mov rdx, lenMsg2
    mov rax, 1
    syscall
    mov rdi, string
    call reverse

    mov rsi, rax
    mov rdi, 1
    call println

    mov rdi, 0
    mov rax, 60
    syscall
